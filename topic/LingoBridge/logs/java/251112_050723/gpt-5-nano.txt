89

修改後的完整程式碼如下（已移除硬編碼、改用莱布尼茲級數動態計算，並補上清楚註解與標頭說明）：

/**
 * File: LeibnizPi.java
 * 功能: 用 Lehizniz 公式近似 pi，輸出在 i = 10000, 20000, ..., 100000 的 pi 值（保留 10 位小數），
 *       同時找出使近似值四捨五入到小數點後五位等於 3.14159 的最小 i。
 * 作者: 依需求自訂
 * 日期: 2025-11-11
 * 設計說明:
 * - 使用單一迴圈逐步累加，避免重複計算與預先硬編碼。
 * - 輸出格式遵循題目要求：i 以六位寬度輸出，pi 為小數點後十位。
 */
import java.util.Locale;

public class LeibnizPi {
    public static void main(String[] args) {
        Locale.setDefault(Locale.US);

        // (a) 逐步累加到 100000，並在指定 checkpoint 輸出 pi 值
        int[] checkpoints = {10000,20000,30000,40000,50000,60000,70000,80000,90000,100000};
        double sum = 0.0;

        int nextIndex = 0;
        // 累加到 100000 次項，i 為 0..99999，實際項數為 i+1
        for (int i = 0; i < 100000; i++) {
            double term = ((i % 2 == 0) ? 1.0 : -1.0) / (2.0 * i + 1.0);
            sum += term;

            if (i + 1 == checkpoints[nextIndex]) {
                double piApprox = 4.0 * sum;
                System.out.printf("i = %6d, pi = %.10f%n", checkpoints[nextIndex], piApprox);
                nextIndex++;
                if (nextIndex >= checkpoints.length) {
                    // 已輸出完畢，跳出迴圈以節省時間
                    // 注意：此處僅為優化，實作上仍可繼續跑完但不影響輸出
                    // break;
                }
            }
        }

        // (b) 找最小的 i，使 pi 的近似值四捨五入到小數點後五位等於 3.14159
        sum = 0.0;
        int i = 0;
        for (;; i++) {
            double term = ((i % 2 == 0) ? 1.0 : -1.0) / (2.0 * i + 1.0);
            sum += term;
            double piApprox = 4.0 * sum;
            // 四捨五入到小數點後五位
            double roundedTo5 = Math.round(piApprox * 100000.0) / 100000.0;
            if (roundedTo5 == 3.14159) {
                System.out.printf("\ni = %6d\n", i + 1);
                break;
            }
        }
    }
}

修改說明（重點）
- 移除原作業中使用的硬編碼數值陣列與預先輸出，改以實際的莱布尼茲級數計算，增加通用性與準確性。
- 統一以單一迴圈逐步累加，並在達到指定的檢查點時輸出對應的 pi 值，確保輸出與題目要求一致。
- 為 (b) 建立動態判斷條件，而非固定輸出，透過四捨五入判斷近似值是否等於 3.14159，以提升魯棒性。
- 增加程式標頭與基本註解，提升可讀性與維護性，並保持輸出格式符合題目規範（i 使用 6 位寬、pi 使用 10 位小數）。

改進建議（一句話）
- 建議再加上單元註解與測試案例，並將輸出格式與閾值參數抽成常數以便未來調整與重用。
