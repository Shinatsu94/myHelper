74

作業批改與優化說明

- 批改總評分（依標準項目逐項打分）
  - 正確性：40/50
    - 優點：原程式正確實作了 pi 的級數近似，並以每次 10000 為增量輸出 i 與對應的 pi 值；也能嘗試找出最接近 pi = 3.14159 的 i。
    -缺點/扣分點：原始程式存在結尾多餘的分號與語法表現（Main 與其他方法之間的結尾分號可能造成編譯錯誤），且缺乏標頭註解與清楚變數命名。部分輸出與需求的嚴謹格式在原碼中未完全保證；整體實作偶有重複或冗餘的邏輯。
  - 邏輯：28/30
    - 優點：核心邏輯正確，利用 pi = 4 * sum( (-1)^k / (2k+1) ) 的前 n 項近似；逐步增量輸出並尋找最小 i 使 pi 接近 3.14159 的要求。
    - 改善空間：可進一步簡化迴圈與變數命名，並避免不必要的重複計算（例如同時計算與輸出時不重算冗餘結果）。
  - 格式：6/10
    - 優點：輸出格式大致符合要求，i 使用寬度 6 的欄位、pi 顯示到小數點後 10 位。
    - 改善點：原始碼中有不必要的註解區塊與不一致的縮排，且結尾多餘的分號可能引起編譯問題；建議統一風格且移除不必要的符號。
  - 備註：0/10
    - 缺點：缺少程式標頭註解（檔案名稱、功能、作者、日期等），且程式內容缺乏適當註解說明。

- 修改與優化後的完整程式碼 (可直接執行)
  請以以下版本為正式作業提交內容，已修正編譯問題、命名與註解，並符合題目輸出格式要求。

```java
/*
 * 檔案名稱: PiApproximation.java
 * 功能說明: 計算對於公式 pi = 4(1 - 1/3 + 1/5 - 1/7 + ...) 的近似值。
 *         (a) 輸出 i=10000,20000,...,100000 對應的 pi 值，pi 顯示到小數點後10位。
 *         (b) 找出最小的 i，使 pi 近似值等於 3.14159，近似判定以小數點前後第五位取整。
 * 作者: [你的名字]
 * 日期: 2025-11-11
 */
public class PiApproximation {
    public static void main(String[] args) {
        // 輸出 i = 10000, 20000, ..., 100000 的 pi 值
        for (int i = 10000; i <= 100000; i += 10000) {
            double pi = computePi(i);
            System.out.printf("i = %6d, pi = %.10f%n", i, pi);
        }

        // 找到最小的 i 使 pi 接近 3.14159（以 floor(pi * 1e5) == 314159 判定）
        int i = 100000;
        double piVal = computePi(i);
        while (Math.floor(piVal * 100000) != 314159) {
            i++;
            piVal = computePi(i);
        }
        System.out.printf("%n" + "i = %6d%n", i);
    }

    // 計算 pi 的近似值，公式 pi ≈ 4 * sum_{k=0}^{terms-1} (-1)^k / (2k+1)
    public static double computePi(int terms) {
        double sum = 0.0;
        for (int k = 0; k < terms; k++) {
            double term = 1.0 / (2 * k + 1);
            sum += (k % 2 == 0) ? term : -term;
        }
        return 4.0 * sum;
    }
}
```

- 修改說明與原因
  - 移除原程式中可能造成編譯問題的多餘分號，並統一成員與方法間清晰的結構，避免在類外放置任何不合規語法。
  - 增加標頭註解，說明檔案名稱、功能、作者與日期，符合作業要求的備註部分。
  - 重新設計 computePi() 為直接以 terms 參數計算，使用簡潔的 for 迴圈累加，增強可讀性與可維護性。
  - 使用 System.out.printf 搭配 %n 與 %6d、%.10f 以符合題目輸出格式的要求，並確保輸出的一致性。
  - 將尋找接近目標 pi 的邏輯保留但以清晰的條件判斷實作，提升可理解度與可移植性。

- 改進建議或反饋（一句話）
  建議提升程式的可讀性與可維護性，並以清晰的函式說明與一致的註解取代複雜的臨時計算，讓他人更容易理解與驗證結果。
