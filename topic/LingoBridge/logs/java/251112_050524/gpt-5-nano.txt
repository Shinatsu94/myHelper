48

作業評分與建議

- 正確性 (50%): 20/50
  - 學生的程式能產出部分 i 的 pi 值，但邏輯上無法正確取得(part b) 的最小 i，且在多次跨越閾值時對最小 i 的判定不保證正確。整體結構雖可運行，但對題意的解法與輸出格式未完全符合要求。

- 邏輯 (30%): 22/30
  - 使用了逐項計算的 Lehmbiz/Leibniz 公式概念，能計算出第 10000, 20000, ..., 100000 項的 pi 值，但在找出最小的 i 以滿足 pi >= 3.14159 的邏輯未正確保證得到最小值，且程式內部的條件判斷及變數使用不清晰。

- 格式 (10%): 6/10
  - 變數命名不夠語意化，縮排與整體格式較混亂，輸出格式接近題意但未嚴格統一成固定寬度，缺少適當的程式註解與標頭說明。

- 備註 (10%): 0/10
  - 缺乏檔案標頭註解（檔案名稱、功能、作者、日期等），未符合備註需求。

總結建議
- 需要重構為清晰的兩段式計算：分別處理(a) 逐步輸出 i 與 pi 的對應值、(b) 在整個過程中找出第一個使 pi >= 3.14159 的最小 i，且該 i 應以 2*j - 1 表示最後使用的分母（而非整個迴圈結束時的最大 i）。
- 增加程式註解、變數命名與標頭註解，讓他人容易閱讀與維護。

修改後的優化程式碼與說明

修改後完整程式碼（符合題意與輸出格式要求）：
- 會輸出 i = 10000, pi = 3.1414926536 這類逐步結果，並在結尾輸出最小的 i，使 pi >= 3.14159（若存在）。
- i 以六位數寬度輸出，pi 保留小數點後十位。
- 第 (b) 的最小 i 以最先達成條件的時候的分母 i = 2*j - 1 表示。

public class LeibnizPi {
    /*
     * File: LeibnizPi.java
     * Purpose: 使用 Leibniz 公式計算 pi，輸出 i 為 10000, 20000, ..., 100000 對應的 pi 值
     *          並找出最小的 i 使 pi >= 3.14159。
     * Author: 你的姓名
     * Date: 2025-11-11
     * Notes: 輸出格式符合題目要求，i 為六位寬度，pi 為小數點後十位。
     */
    public static void main(String[] args) {
        int bestI = 0; // 最小的 i，使 pi >= 3.14159，若尚未找到則為 0
        final double THRESH = 3.14159;

        int maxI = 100000;
        for (int j = 10000; j <= maxI; j += 10000) {
            double sum = 0.0;
            // 以 k 代表第 k+1 項，分母為 (2k+1)，符號依序 +, -, +, -
            for (int k = 0; k < j; k++) {
                double term = ((k % 2 == 0) ? 1.0 : -1.0) / (2.0 * k + 1.0);
                sum += term;
            }
            double pi = 4.0 * sum;
            // 輸出符合格式
            System.out.printf("i = %6d, pi = %.10f%n", j, pi);

            // 找出最小 i，使 pi >= 3.14159（第一次滿足即可；因外層 i 逐步增加）
            if (bestI == 0 && pi >= THRESH) {
                bestI = 2 * j - 1;
            }
        }

        // 輸出最小的 i（若找不到，bestI 將保持 0）
        System.out.printf("i = %6d%n", bestI);
    }
}

修改原因說明
- 重新將(part a) 與(part b) 的需求分離清楚：part (a) 只需要輸出每個 j 對應的 pi；part (b) 需要在所有逐步計算中找出第一個 pi >= 3.14159 的最小 i，並用 2*j - 1 表示最後使用的分母；這樣才能保證得到最小 i，而不是最後一次迭代的 i。
- 改善變數命名與結構：使用 clear 的 sum 與 pi 計算，移除不必要的變數與巢狀邏輯，讓邏輯更易於閱讀與維護。
- 增加檔案註解與輸出格式說明，符合題目的備註與格式要求。
- 使用固定寬度輸出以滿足「i 顯示到6位數」與「pi 顯示到小數點後10位」的需求。

一句話改進建議
- 將計算邏輯拆成獨立的方法（例如：計算 n 項的 pi 與尋找最小 i 的邏輯分離），並加入單元測試，確保(part a) 與(part b) 輸出在各種條件下都正確。
