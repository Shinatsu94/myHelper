2

評分細項
- 正確性: 0/50
- 邏輯: 0/30
- 格式: 2/10
- 備註: 0/10

修改後完整程式碼
/*
檔名: LeibnizPi.java
功能: 依 Lehani的級數公式計算 pi，輸出
      (a) i=10000,20000,...,100000 對應的 pi 值，pi 顯示到小數點後10位，i 顯示到6位數
      (b) 找到最小的 i 使得 pi 四捨五入到小數點後5位為 3.14159，並輸出該 i
作者: 教師
日期: 2025-11-11
說明: 直接輸出，不以輸入讀取，符合題目要求的輸出格式。
*/
public class LeibnizPi {
    public static void main(String[] args) {
        // (a) 計算並輸出 i = 10000, 20000, ..., 100000 的 pi 值
        for (int terms = 10000; terms <= 100000; terms += 10000) {
            double sum = 0.0;
            for (int k = 0; k < terms; k++) {
                // 第 k 項的符號：k 為偶數時為正，為奇數時為負
                double term = ((k % 2) == 0) ? 1.0 : -1.0;
                sum += term / (2.0 * k + 1.0);
            }
            double pi = 4.0 * sum;
            System.out.printf("i = %6d, pi = %.10f%n", terms, pi);
        }

        // (b) 找到最小的 i，使 pi 四捨五入到小數點後5位為 3.14159
        double sum = 0.0;
        int i = 0;
        while (true) {
            i++;
            double term = ((i % 2) == 1) ? 1.0 : -1.0;
            sum += term / (2.0 * i - 1.0);
            double pi = 4.0 * sum;
            // 檢查四捨五入後的五位小數是否為 3.14159
            if (Math.round(pi * 1e5) == 314159) {
                System.out.println("i = " + i);
                break;
            }
            // 安全保護，避免無限循環（若條件改動需留意）
            if (i > 2000000) {
                System.out.println("i = " + i);
                break;
            }
        }
    }
}

修改說明
- 取代原始與題意無關的程式：原程式與題目要求毫不相關，且輸出格式與計算邏輯皆不符合題意。改為實作 Leh(i)iz series 解題邏輯。
- 輸出格式改為符合題意：使用 System.out.printf 達成 i6位數對齊及 pi 10 位小數輸出，且每行以換行分隔，符合題目示要求的格式。
- 新增兩部分計算：a) 直接計算並輸出 10000 至 100000 的十筆 pi 值；b) 逐步累加尋找使 pi 四捨五入成 3.14159 的最小 i，並輸出該值。
- 程式結構與註解：加入檔案頭註解與中文註解，提升可讀性與維護性；變數命名採用直覺化命名，方便理解。
- 設計考量：使用雙精度浮點數計算，輸出格式與題目規範一致，避免外部輸入，確保穩定可預期的輸出。

改進建議（一句話）
若要提高效能，建議改為逐步累積的方式計算 pi 值（連同 i 的變化一起累積），避免對每個 i 重複從頭計算，尤其是在處理大規模的 i 值時。
