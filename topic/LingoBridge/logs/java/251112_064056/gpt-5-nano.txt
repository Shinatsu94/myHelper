0

修改後完整程式碼：
/*
檔案名稱: LeibnizPi.java
功能: 根據題目需求，計算勒布尼茲級數近似圓周率並輸出指定格式；同時找出最小的 i 使 pi 的近似值符合 3.14159（五位小數）的需求。
作者: 教師助教
日期: 2025-11-11
說明: 使用累積方式逐步累加勒布尼茲級數的項，避免每次重新計算整個區間，並以固定寬度格式輸出。
*/
public class LeibnizPi {
    public static void main(String[] args) {
        // 第一次需求：輸出 i=10000..100000，間隔為10000，對應的 pi 值
        int[] targets = {10000, 20000, 30000, 40000, 50000, 60000, 70000, 80000, 90000, 100000};
        double pi = 0.0;
        int termsComputed = 0;

        StringBuilder sb = new StringBuilder();
        for (int t : targets) {
            while (termsComputed < t) {
                double term = 4.0 * ((termsComputed % 2 == 0) ? 1.0 : -1.0) / (2 * termsComputed + 1);
                pi += term;
                termsComputed++;
            }
            sb.append(String.format("i = %6d, pi = %.10f%n", t, pi));
        }

        // 設定與題目空行需求相符的空行（兩部分之間有一個空行）
        sb.append('\n');

        // 第二需求：找出最小的 i 使 pi ≈ 3.14159，取絕對誤差小於 0.000005
        double target = 3.14159;
        double acc = 0.0;
        int iMin = 0;
        for (int k = 0; ; k++) {
            acc += 4.0 * ((k % 2 == 0) ? 1.0 : -1.0) / (2 * k + 1);
            if (Math.abs(acc - target) < 0.000005) {
                iMin = k + 1;
                break;
            }
        }

        sb.append(String.format("i = %6d%n", iMin));

        System.out.print(sb.toString());
    }
}

逐條修改原因說明：
- 取代原先與題意無關的數字顛倒功能：原程式僅做數字反轉，與題目「計算勒布尼茲級數近似 pi 並輸出格式」毫無關聯，必須替換成實際的計算與輸出流程。
- 引入勒布尼茲級數的正確實作：用累加方式逐項加入 4*(±1)/(2k+1)，並以迴圈逐步累積至指定 i 值，確保正確性與可控性，且能重用累積結果避免重複計算。
- 避免重新計算成本：採用累加的方式並逐步增加到下一個目標 i，提升效率，特別是對於較大 i 值如 100000 的情況。
- 輸出格式化：使用 System.out.printf 及固定寬度格式（i 使用寬度 6，pi 使用小數點後 10 位），以符合題目要求的輸出樣式，並在第一部分與第二部分之間留一空行。
- 程式標頭與註解：加入檔案說明與功能描述的註解，方便維護與他人閱讀。

改進建議與反饋（一句話）：
建議在實作初期就定義明確的輸出格式與演算法邊界，並以單元測試驗證不同 i 值的輸出與收斂性，避免日後因格式或精度偏差影響結果。
