38

作業批改與修改說明

一、評分（0-100，依照您給的標準逐項打分）
- 正確性 (50%): 15
  - 程式的第一部份採用勒布尼茲級數正確計算 pi，並以每 10000 項輸出一次，格式符合要求；但第二部份原本有語法錯誤且邏輯不清楚，無法正確編譯與執行，因此整體正確性分數較低。
- 邏輯 (30%): 15
  - 第一部份的邏輯較為直覺，符合題意；第二部份原始邏輯有嚴重問題（語法錯誤、判斷條件與輸出不明確），因此影響整體邏輯評分。
- 格式 (10%): 8
  - 變數命名清楚、縮排基本正確，輸出格式使用了與題目相符的 printf 格式。不過整體可再強化可讀性與註解。
- 備註 (10%): 0
  - 原始程式缺乏檔案標頭註解（檔案名稱、功能、作者、日期等），未符合題目要求中的註解規範。

總分 = 15 + 15 + 8 + 0 = 38

二、修改與優化後的完整程式碼
修改說明與原因會在程式碼旁說明細節。

/*
檔案名稱: CSIE_41343221_1017_1.java
功能: 使用勒布尼茲級數近似圓周率，輸出指定條件之 pi 值與最小 i 使近似值四捨五入為 3.14159 的值。
作者: 教師（請自行填寫）
日期: 2025-11-11
*/
public class CSIE_41343221_1017_1 {
    public static void main(String[] args) {
        // Part (a): 輸出 i 為 10000, 20000, ..., 100000 時的 pi 值
        int maxCheck = 100000;
        int step = 10000;
        double sum = 0.0;

        for (int i = 1; i <= maxCheck; i++) {
            double term = 1.0 / (2 * i - 1);
            if ((i & 1) == 0) { // i 偶數，減去 term
                sum -= term;
            } else { // i 奇數，加入 term
                sum += term;
            }

            if (i % step == 0) {
                double pi = 4.0 * sum;
                System.out.printf("i = %6d, pi = %.10f%n", i, pi);
            }
        }

        // 輕量空行，符合題目輸出「空白行」的需求
        System.out.println();

        // Part (b): 找到最小的 i，使 pi 四捨五入成 3.14159（五位小數）
        sum = 0.0;
        int i = 1;
        while (true) {
            double term = 1.0 / (2 * i - 1);
            if ((i & 1) == 0) {
                sum -= term;
            } else {
                sum += term;
            }
            double pi = 4.0 * sum;
            long roundedTo5 = Math.round(pi * 100000L); // 四捨五入到五位小數，放大 1e5
            if (roundedTo5 == 314159) {
                System.out.printf("i = %6d%n", i);
                break;
            }
            i++;
        }
    }
}

三、修改原因與重點說明
- 修正編譯與邏輯問題：原本第二部份存在嚴重語法錯誤，且原意為找出最小 i 使 pi 四捨五入到五位小數等於 3.14159，但實作方式與判斷條件不正確。新版本用穩健的四捨五入策略（pi 四捨五入到五位小數後與 314159 比對）來確保正確性。
- 清晰分區與註解：增加檔案標頭註解，將兩個需求分成 Part (a) 與 Part (b) 兩個區塊，方便閱讀與維護。
- 輸出格式對齊：沿用題目要求的輸出格式，i 以 6 位寬度輸出，pi 以小數點後 10 位輸出，確保與樣例一致。
- 空行處理：在兩部分輸出之間新增空行，符合樣例輸出需求。

四、改進建議（一句話）
- 建議在提交前先用樣例對照逐步驗證輸出格式與邏輯，並加入適當的註解與單元測試，以避免語法與邏輯錯誤影響整體評分。