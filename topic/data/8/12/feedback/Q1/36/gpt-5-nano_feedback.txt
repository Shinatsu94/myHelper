87

改進建議：程式雖然正確地完成題目需求，但缺少程式標頭註解與較清晰的結構與命名，建議加入標頭與適當註解，並把邏輯分成清楚的區塊以提升可讀性與維護性。

優化說明與修改後程式碼（重點）：
- 加入檔案標頭註解，說明檔名、用途、作者、日期。
- 調整變數命名與加入註解，增強可讀性。
- 將核心計算保持簡潔的迴圈邏輯，並在不同階段給予清楚的區分註解。
- 保留原有輸出格式與要求，但以較清晰的結構呈現。

修改後完整程式碼：

/*
檔案名稱: LeibnizPi.java
功能說明: 以勒布尼茲級數近似 pi，輸出 i 為 10000, 20000, ..., 100000 時的 pi 值，
        以及在 i 從 100001 開始，找出最小的 i 使 pi 四捨五入至小數點後第5位為 3.14159。
作者: 你的名字
日期: 2025-11-15
版本: 1.0
*/

public class LeibnizPi {
    public static void main(String[] args) {
        // 部分 (a): 逐步累加勒布尼茲級數直到 i = 100000，並每 10000 次輸出一次近似值
        double sum = 0.0;
        double pi = 0.0;

        // 級數的第 i 項計算：當 i 為奇數時為 +1/(2i-1)，偶數時為 -1/(2i-1)
        for (int i = 1; i <= 100000; i++) {
            double term = 1.0 / (2 * i - 1);
            if (i % 2 == 1) {
                sum += term;
            } else {
                sum -= term;
            }
            pi = 4.0 * sum;

            // 每 10000 次輸出一次 i 與對應的 pi，格式符合題目要求
            if (i % 10000 == 0) {
                System.out.println("i = " + String.format("%6d", i) + ", pi = " + String.format("%.10f", pi));
            }
        }

        // 空行分隔兩部分輸出
        System.out.println();

        // 部分 (b): 從 i = 100001 開始，找出最小的 i 使 pi 四捨五入至小數點後第5位為 3.14159
        // 直接沿用前面的 sum（繼續累加後續項）以保留整體分數的連續性
        for (int i = 100001; i <= 1000000; i++) {
            double term = 1.0 / (2 * i - 1);
            if (i % 2 == 1) {
                sum += term;
            } else {
                sum -= term;
            }
            pi = 4.0 * sum;

            // 四捨五入至小數點後5位，若等於 3.14159 則輸出該 i 並結束
            String piStr5 = String.format("%.5f", pi);
            if ("3.14159".equals(piStr5)) {
                System.out.print(i);
                return;
            }
        }
    }
}