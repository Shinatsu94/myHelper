85

評分明細
- 正確性 (50/50): 程式輸出符合題目要求的格式與數值範圍，兩段需求皆正確實作，並得到預期的結果（包含最小的 i 值 136121）。
- 邏輯 (26/30): 使用逐步累加的方式計算級數，並在需要時以相同的累加過程繼續找到 pi=3.14159 的最小 i。與原題目的需求相符且思路清晰，但原程式對每個 i 重新從頭計算的設計較低效，且部分變數命名與結構有優化空間。
- 格式 (9/10): 程式整體排版良好、縮排清晰，輸出格式符合題意（i 的欄位寬度、pi 的小數位數等）。但原程式缺乏一致性的程式註解與標頭格式，略影響可讀性。
- 備註 (0/10): 缺少程式標頭註解（檔案名稱、功能、作者、日期等），未符合註解要求。

修改說明與優化點
1) 將 Math.pow(-1, k-1) 替換成簡單的符號判斷
- 原因：Math.pow 對於整數次方在效能上不如單純的符號判斷，且可能造成不必要的精度開銷。
2) 使用累加法逐步更新 sum，而不是每次都從頭計算
- 原因：原本的做法每次 i 增加時都重新計算 1..i 的和，時間複雜度較高；改用累加方式可把整體時間降至線性，且更符合逐步迭代的直覺。
3) 程式結構與註解：加入標頭註解與更清晰的變數命名
- 原因：符合作業要求的備註部分，提升可讀性與維護性。
4) 統一輸出格式與邏輯說明
- 原因：確保輸出格式嚴格符合題目規定，減少格式錯誤的風險。

修改後完整程式碼（優化版）
public class Improved_CSIE_41343233_1017_1 {
    public static void main(String[] args) {
        // 檔案說明：
        // 檔案名稱: Improved_CSIE_41343233_1017_1.java
        // 功能: 計算 pi 的近似值並輸出；同時找出使 pi=3.14159 的最小 i。
        // 作者: 適用者
        // 日期: 2025-11-11

        // 使用累加方式逐步更新 sum，避免每次都從頭計算
        double sum = 0.0;
        int iTerm = 0;          // 已計算到的項數
        int nextTarget = 10000;  // 下一個要輸出的 i 值

        // 第一部分：輸出 i = 10000, 20000, ..., 100000 對應的 pi
        for (iTerm = 1; iTerm <= 100000; iTerm++) {
            // term = (-1)^(iTerm-1) / (2*iTerm - 1)
            double term = ((iTerm % 2) == 1) ? 1.0 / (2 * iTerm - 1) : -1.0 / (2 * iTerm - 1);
            sum += term;

            if (iTerm == nextTarget) {
                double pi = 4.0 * sum;
                System.out.printf("i = %6d, pi = %.10f\n", nextTarget, pi);
                nextTarget += 10000;
            }
        }

        // 第二部分：找到最小的 i 使 pi 的前五位小數為 3.14159（截斷取得 314159）
        // 以同樣的累加方式繼續增加項數，直到符合條件
        while (true) {
            iTerm++;
            double term = ((iTerm % 2) == 1) ? 1.0 / (2 * iTerm - 1) : -1.0 / (2 * iTerm - 1);
            sum += term;
            double pi = 4.0 * sum;
            int truncated = (int)(pi * 100000); // 取得前五位小數的截斷整數
            if (truncated == 314159) {
                System.out.printf("\ni = %6d", iTerm);
                break;
            }
        }
    }
}

說明：
- 修改重點放在避免冗餘的重新計算、使用簡潔的符號判斷，以及補上程式標頭註解與格式一致性，提升可維護性與執行效率。

改進建議（一句話）
- 建議繼續以累加式與自動測試驗證輸出格式與精度，並在必要時使用更高精度類型（如 BigDecimal）以避免浮點誤差在長距離迭代中的累積影響。