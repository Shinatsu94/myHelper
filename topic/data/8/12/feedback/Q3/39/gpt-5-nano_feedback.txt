0

修改後完整程式碼：

/*
檔案名稱: LeibnizPi.java
功能說明: 使用Leibniz公式計算 pi，輸出 i 為 10000,20000,...,100000 時對應的 pi 值，pi 保留小數點後10位，i 顯示為6位數寬。
作者: 教師
日期: 2025-11-12
*/

// 通過逐步累加的方式計算，避免每次都從頭計算，提高效能
public class LeibnizPi {
    public static void main(String[] args) {
        final int maxN = 100000; // 最大的項數
        final int step = 10000;  // 每隔多少項輸出一次結果

        double sum = 0.0;

        // n 為項數，計算 1 - 1/3 + 1/5 - ... (+/-) 1/(2n-1)
        for (int n = 1; n <= maxN; n++) {
            double term = ((n - 1) % 2 == 0) ? 1.0 : -1.0;
            sum += term / (2.0 * n - 1.0);

            if (n % step == 0) {
                double pi = 4.0 * sum;
                System.out.printf("i = %6d, pi = %.10f%n", n, pi);
            }
        }
    }
}

修改說明：
- 將原本僅課堂範例式的單次計算改為逐步累加，語句改為累加 1/(2n-1) 的符號與大小，避免對於每個輸出重新計算整個和，提升時間效率。
- 使用格式化輸出 System.out.printf，符合題目對 i 的呈現寬度（6 位）與 pi 的小數位數（10 位）。
- 增添程式標頭註解，包含檔案名稱、功能、作者與日期，符合格式與備註要求。

改進建議：
- 若要支援不同的輸出範圍與精度，建議把 maxN、step 等值改成可配置的參數，並加入基本的輸入驗證與例外處理。